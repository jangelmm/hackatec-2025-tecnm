# Descripci√≥n

## Contexto del Reto

Oaxaca es una de las entidades con mayor riqueza cultural de M√©xico. Desde textiles zapotecos hasta barro negro, las artesan√≠as oaxaque√±as son reconocidas a nivel mundial por su autenticidad, simbolismo y t√©cnica. Sin embargo, la mayor√≠a de los artesanos enfrentan barreras estructurales para comercializar sus productos de manera justa, sostenible y directa.

Hoy m√°s que nunca, la tecnolog√≠a puede ser una aliada para conectar la tradici√≥n con el mundo sin sacrificar identidad ni calidad.

## Objetivo del Reto

Desarrollar una soluci√≥n tecnol√≥gica innovadora que permita a artesanos, artesanas y comunidades de Oaxaca comercializar sus productos a nivel regional, nacional y/o internacional, respetando los valores de:

- Autenticidad  
- Conservaci√≥n cultural  
- Beneficio directo para quienes crean la artesan√≠a  

## Requisitos Clave a Considerar

- **Autenticidad y trazabilidad**: Integrar elementos que den visibilidad al proceso, la historia o la persona detr√°s del producto.
- **Conservaci√≥n cultural**: No generar din√°micas extractivas, sino promover el conocimiento tradicional como un valor.
- **Usabilidad**: La herramienta debe ser accesible y considerar las brechas de conectividad y suministro el√©ctrico en las comunidades oaxaque√±as.
- **Modelo justo de comercializaci√≥n**: Evitar la intermediaci√≥n abusiva y maximizar los ingresos para el o la artesana.
- **Escalabilidad local**: Debe poder adaptarse a distintas comunidades o ramas artesanales (barro, textiles, madera, etc.).

## Impacto Esperado

- Potenciar la autonom√≠a de los artesanos.  
- Conectar el talento y la tradici√≥n de Oaxaca con el mercado global.  
- Reforzar la identidad oaxaque√±a en la era digital.

# Evaluaci√≥n

### 20‚Äì14

La memoria t√©cnica presenta el desarrollo de manera completa, clara y concisa de los elementos solicitados y especificados en el **ENTREGABLE**, por lo que se justifica y respalda plenamente la investigaci√≥n realizada.

---

### 5‚Äì4

**Identificaci√≥n del problema, necesidad o √°rea de oportunidad**  
Identifica, describe y contextualiza plenamente, de forma detallada y concisa el problema, necesidad o √°rea de oportunidad del Reto y Tem√°tica que se debe atender, incluyendo datos cualitativos y cuantitativos relevantes que sustenten la propuesta de soluci√≥n.

---

### Descripci√≥n de la propuesta de soluci√≥n ‚Äî 5‚Äì4

Explica en forma clara su propuesta. Se aprecia con precisi√≥n y claridad cu√°l es el producto de la propuesta y c√≥mo esta contribuye a la soluci√≥n o mejora de la necesidad, problem√°tica o √°rea de oportunidad del Reto y Tem√°tica que se debe atender. Se logra observar completamente el alcance e impacto que se pretende tener a nivel local, regional, nacional y/o global.

---

### Metodolog√≠a de desarrollo y herramientas ‚Äî 15‚Äì11

- Explica de manera clara y detallada la metodolog√≠a de desarrollo empleada.  
- Presenta y justifica la elecci√≥n de todas las herramientas tecnol√≥gicas utilizadas.  
- Explica de forma detallada los aspectos t√©cnicos y normas que la propuesta debe cumplir y proporciona los documentos t√©cnicos del dise√±o.

---

### Ejes Transversales ‚Äî 5‚Äì4

Muestra de forma clara y precisa c√≥mo es que la propuesta de soluci√≥n repercute, impacta o puede lograr una intersecci√≥n en **tres o cuatro** de los siguientes ejes transversales:

- Inclusi√≥n y Equidad  
- Impacto Social  
- Sustentabilidad y Sostenibilidad  
- Tecnolog√≠as Emergentes

---

### Desarrollo tecnol√≥gico ‚Äî 40‚Äì28

Presenta un desarrollo tecnol√≥gico completamente alineado con el Reto y la Tem√°tica que se deben atender y con lo establecido en la memoria t√©cnica de la propuesta.  
Las pruebas demuestran un grado de avance adecuado y satisfactorio en el funcionamiento del prototipo, prueba de concepto o producto.

---

### Presentaci√≥n ‚Äî 10‚Äì8

La o el expositor y dem√°s integrantes del equipo presentan su propuesta de forma organizada y fluida, comunicando claramente y sin ambig√ºedades el desarrollo del contenido de su propuesta de soluci√≥n, a trav√©s de los siguientes elementos:

- Dominio t√©cnico del tema (Reto y Tem√°tica).  
- Gesti√≥n adecuada de los tiempos.  
- Comunicaci√≥n verbal y no verbal consistente.  
- Habilidad para comunicar la integraci√≥n de tecnolog√≠as, aplicaciones, servicios y sistemas propios de la propuesta de soluci√≥n.  
- Pertinencia de la informaci√≥n y uso de datos correctos.  
- Responder de forma correcta y precisa las preguntas formuladas por el Jurado Calificador.  
- Demostrar habilidades para ‚Äúvender‚Äù o convencer del impacto e importancia de su propuesta de soluci√≥n.


# Notas sobre el enfoque del proyecto
En la reuni√≥n se qued√≥ de acuerdo a que el proyecto se podr√≠a enfocar a una regi√≥n en espec√≠fico, as√≠ como a una artesania propia de la misma con su propio lenguaje.

Enfoque:

Comunidad: San Baltazar Chichicapam
Artesania: Mezcal
Lenguaje: Zapoteco

Contexto: San baltazar chichicapam es una comunidad de la zona mezcalera del estado, ha estado generando mezcal desde generaciones, en mi caso particular desde mi abuelo, mi padre en su infancia, y yo como visitante mientras estudio ingenier√≠a.

Hay una comunidad de mezcalero en mi pueblo, desde palenques de familiares cercanos como primos, tios, y familiares, hasta amigos y conocidos, todos compartiendo sus conocimientos desde ferias de mezcal locales, y redes sociales comunes como whatsaap e instagram.

El problema es que hace falta una mayor difusi√≥n de su producto, actualmente el √∫nico registro que se tiene de ellos es mediante publicaciones de facebook con bajo alcance, whatsapp y la recomendaci√≥n hablada del pueblo.

Los intermediarios tambi√©n afectan a su econom√≠a, por lo que resolver este problema tambi√©n afecta a los artesanos.

Resolver estos problemas as√≠ como darles mayor visibilidad ser√≠a util, as√≠ como el trato directo con el artesano.

# Fase 1 - An√°lisis

## **1. Requerimientos de Negocio**  
### **1.1 Contexto del Proyecto**  
**Organizaci√≥n:** Comunidad de Mezcaleros "Chichicapam Ancestral".  
**Tipo:** Comunidad rural organizada (sector agroindustrial-artesanal).  
**Sector:** Producci√≥n y comercializaci√≥n de bebidas artesanales.  
**Producto Principal:** Mezcal de agave espad√≠n, elaborado con t√©cnicas zapotecas ancestrales.  
**Necesidad:**  
- Eliminar intermediarios que retienen **30-50% de las ganancias**.  
- Facilitar ventas internacionales directas con **autenticidad cultural garantizada**.  
**Ubicaci√≥n:** San Baltazar Chichicapam, Oaxaca (zona con electricidad intermitente y conectividad 3G limitada).  

**Procesos Actuales (BPMN):**  
```mermaid
graph TD
    A[Cosecha manual de agave] --> B[Cocci√≥n en horno de tierra]
    B --> C[Fermentaci√≥n en tinas de madera]
    C --> D[Destilaci√≥n en alambique de cobre]
    D --> E[Etiquetado artesanal]
    E --> F{Venta en ferias locales o WhatsApp}
    F --> G{{P√©rdida del 40% por intermediarios}}
```

---

### **1.2 Identificaci√≥n del Problema**  
**Problemas Clave:**  
1. **Intermediaci√≥n abusiva:** Margen de ganancia de intermediarios: **30-50%** (entrevistas a 15 productores, marzo 2025).  
2. **Barrera tecnol√≥gica:** **70% de artesanos >50 a√±os** no usan comercio electr√≥nico (INEGI 2024).  
3. **Log√≠stica compleja:** Falta de infraestructura para env√≠os internacionales certificados.  

**Impacto:**  
- **Reducci√≥n del 40% en ingresos** para 12 familias.  
- **P√©rdida de t√©cnicas ancestrales** por falta de valoraci√≥n internacional.  

**Soluci√≥n Actual:**  
- Publicaciones en WhatsApp con **<100 interacciones promedio**.  
- Dependencia de **4 ferias locales anuales** para ventas.  

---

### **1.3 Objetivos del Negocio**  
**Misi√≥n:**  
*"Preservar la tradici√≥n mezcalera mediante tecnolog√≠a que garantice comercio justo y conexi√≥n cultural global."*  

| Objetivo General          | Objetivos Espec√≠ficos                          | M√©tricas de √âxito (6 meses)       |  
|---------------------------|-----------------------------------------------|-----------------------------------|  
| Reducir intermediaci√≥n al 15% | 1. Plataforma con perfiles multimedia<br>2. Sistema de trazabilidad QR + blockchain<br>3. Integraci√≥n pagos/Env√≠os | - 50 ventas internacionales<br>- 80% de productos con QR validado |  

---

### **1.4 Visi√≥n del Producto**  
**Nombre:** **Ra√≠ces Conectadas**  
**Eslogan:** *"Camino del Maguey.(Nehza Dohba)"*  
**Elevator Pitch:**  
> *"Camino del Maguey (Nehza Dohba) es una plataforma web que elimina intermediarios en la venta de mezcal artesanal. Cada botella incluye un QR con acceso del maestro mezcalero narrando su proceso en zapoteco, garantizando autenticidad y comercio justo. ¬°Conectamos tradici√≥n con innovaci√≥n!"*  

**Ventajas Competitivas:**  
1. üé• **Videos en YouTube** (gratis, sin costos de almacenamiento).  
2. **Descripci√≥n de los productos**
3. üí≥ **Pagos con tarjeta/d√©bito internacional** (Conekta).  
4. üöö **Env√≠os DHL/Estafeta** con c√°lculo autom√°tico de costos.  

---

## **2. Alcance del Producto**  
### **2.1 Diagrama de Contexto**  
```mermaid
graph LR
    A[Mezcalero] -->|Sube video a YouTube| B(Plataforma Ra√≠ces Conectadas)
    B -->|Genera QR + NFT| C[(Blockchain Polygon)]
    D[Comprador] -->|Escanea QR| E{{Video en YouTube + Datos NFT}}
    B -->|Procesa pago| F[Gateway Conekta]
    F -->|Notificaci√≥n SMS| A
    B -->|Coordina env√≠o| G[DHL/Estafeta]
```

### **2.2 √Årbol de Caracter√≠sticas**  
```mermaid
graph TD
    A[Ra√≠ces Conectadas] --> B[Gesti√≥n de Productos]
    A --> C[Trazabilidad]
    A --> D[Pagos]
    A --> E[Log√≠stica]
    B --> B1[Subir video a YouTube]
    B --> B2[Audio en lengua ind√≠gena]
    C --> C1[QR generado autom√°tico]
    C --> C2[Registro NFT en Polygon]
    D --> D1[Tarjetas internacionales]
    D --> D2[Dep√≥sito autom√°tico CLABE]
    E --> E1[C√°lculo de costos en tiempo real]
    E --> E2[Seguimiento de env√≠o]
```

---

## **3. Requerimientos de Usuario**  
### **3.1 Historias de Usuario (MoSCoW)**  
| ID  | Historia                            | Prioridad | Puntos |     |
| --- | ----------------------------------- | --------- | ------ | --- |
| HU1 | Subir video a YouTube y Descripci√≥n | Must Have | 8      |     |
| HU2 | Generar QR con NFT                  | Must Have | 5      |     |
| HU3 | Procesar pago con tarjeta           | Must Have | 7      |     |

**HU1 Detallada:**  
```markdown
ID: HU1  
Nombre: Subir video del proceso artesanal  
Usuario: Artesano  
Peso: 8 puntos  
Iteraci√≥n: 1  
Descripci√≥n:  
Como artesano, necesito subir un video de 2 minutos a YouTube mostrando mi proceso de elaboraci√≥n.  

Tareas:  
1. Integraci√≥n con API de YouTube.  
2. Interfaz con bot√≥n de grabaci√≥n y subida.  
3. Almacenar enlace en Firebase.  

Pruebas:  
- Subir video de prueba y verificar enlace en plataforma.  
- Validar reproducci√≥n offline en PWA.  
```

---

**# Implementaci√≥n con Reflex (Python)**  
**Optimizado para desarrollo r√°pido y usabilidad en comunidades rurales**  

---

## **4. Plan y Viabilidad**  
### **4.1 Cronograma con Reflex (7 Horas)**  
```mermaid
gantt
    title Desarrollo Express con Reflex
    dateFormat  HH:mm
    axisFormat %H:%M

    section Configuraci√≥n
    Instalar Reflex y dependencias :09:00, 30min

    section Desarrollo
    Autenticaci√≥n SMS (Twilio API) :09:30, 1h
    Subida de videos a YouTube :10:30, 2h
    Generaci√≥n QR + Enlace :12:30, 1h
    Integraci√≥n Conekta (Pagos) :13:30, 1h

    section Pruebas
    Flujo completo de venta :14:30, 30min
```

### **4.2 Stack T√©cnico Simplificado**  
| Componente       | Herramienta                  | Justificaci√≥n                                      |  
|------------------|-----------------------------|---------------------------------------------------|  
| **Frontend**     | Reflex (Python)             | Desarrollo full-stack en un solo lenguaje          |  
| **Base de Datos**| SQLite                      | Sin configuraci√≥n de servidores (embedded)         |  
| **Pagos**        | Conekta API                 | Soporte para tarjetas y SPEI en M√©xico             |  
| **Blockchain**   | Polygon + Alchemy API       | NFTs de bajo costo con Python (web3.py)            |  

**C√≥digo Base con Reflex:**  
```python
# main.py
import reflex as rx
import qrcode
from youtube_upload.client import YoutubeUploader

class State(rx.State):
    video_path: str = ""
    youtube_url: str = ""
    qr_img: str = ""

    def upload_to_youtube(self):
        uploader = YoutubeUploader()
        uploader.upload(self.video_path)
        self.youtube_url = uploader.get_url()

    def generate_qr(self):
        qr = qrcode.make(self.youtube_url)
        qr.save("qr_artesano.png")
        self.qr_img = "qr_artesano.png"

def index():
    return rx.center(
        rx.vstack(
            rx.upload(rx.text("Subir video"), 
            rx.button("Subir a YouTube", on_click=State.upload_to_youtube),
            rx.image(src=State.qr_img),
            spacing="2em"
        ),
        padding="2em"
    )

app = rx.App()
app.add_page(index)
```

---

## **5. Documentaci√≥n T√©cnica**  
### **5.1 Configuraci√≥n Express**  
1. **Instalar dependencias:**  
```bash
pip install reflex youtube-upload-client qrcode[pil] web3
```

2. **Variables de entorno (.env):**  
```env
TWILIO_SID=tu_sid
TWILIO_TOKEN=tu_token
CONEKTA_API_KEY=key_xxxx
POLYGON_RPC_URL=https://polygon-rpc.com
```

### **5.2 Flujo Clave**  
1. **Subida de video:**  
   - Usa la librer√≠a `youtube-upload-client` para subir directamente desde Python.  
   - Los artesanos solo necesitan hacer clic en "Subir video" (sin manejar APIs).  

2. **Generaci√≥n de QR:**  
   - Crea c√≥digos QR est√°ticos vinculados al video de YouTube.  
   - Se almacena localmente para acceso offline.  

3. **Pagos con tarjeta:**  
   - Conekta procesa pagos internacionales y deposita directamente a la cuenta CLABE del artesano.  

---

## **6. Costos Operativos**  
| Recurso                             | Costo Mensual         |     |
| ----------------------------------- | --------------------- | --- |
| Hosting (Render)                    | $0 (Plan Free)        |     |
| Twilio SMS                          | $0.0075 por SMS       |     |
| Polygon NFTs                        | $0.01 por transacci√≥n |     |
| **Total Estimado (100 ventas/mes)** | **$2.75 USD**         |     |

---

## **7. Equipo T√©cnico**  
| Nombre | Rol        | Tecnolog√≠as Clave  |     |
| ------ | ---------- | ------------------ | --- |
| √Ångel  | Backend    | Python/Reflex/APIs |     |
| Eric   | Frontend   | Reflex/UI Design   |     |
| Manuel | Blockchain | Solidity/Polygon   |     |

**Repositorio GitHub:**  
```
https://github.com/camino_del_maguey/reflex-mvp
``` 

# Fase 2 - Dise√±o: Ra√≠ces Conectadas / Origen Chichicapam

## **1. Agrupaci√≥n de Historias de Usuario por Caracter√≠sticas (√âpicas)**

Organizamos las funcionalidades clave identificadas en la Fase 1 y la nota adicional en las siguientes √âpicas:

* **√âpica 1: Gesti√≥n de Identidad del Maestro Mezcalero**
    * HU-M1: Como Maestro Mezcalero, quiero registrar y actualizar mi perfil (nombre, historia, palenque, foto, *audio Zapoteco*, datos de contacto).
    * HU-M2: Como Administrador (del proyecto), quiero validar la identidad y pertenencia a la comunidad de los Maestros Mezcaleros registrados *(Funcionalidad deseable post-MVP)*.
* **√âpica 2: Gesti√≥n y Autenticaci√≥n de Lotes de Mezcal**
    * HU-L1: Como Maestro Mezcalero, quiero registrar un nuevo lote de mezcal (tipo agave, notas, fecha/a√±o, fotos, enlace a video de YouTube).
    * HU-L2: Como Maestro Mezcalero, quiero generar un c√≥digo QR √∫nico para cada lote registrado que enlace a su informaci√≥n detallada.
    * HU-L3: Como Sistema, quiero asegurar que cada lote tenga un identificador √∫nico y est√© asociado a un Maestro Mezcalero validado.
* **√âpica 3: Experiencia del Comprador y Visualizaci√≥n**
    * HU-C1: Como Comprador, quiero escanear el c√≥digo QR de una botella de mezcal.
    * HU-C2: Como Comprador, quiero ver una p√°gina web con la informaci√≥n detallada del lote (proceso, agave, notas), fotos, video del proceso/maestro (YouTube), y la historia del Maestro Mezcalero (incluyendo su saludo en Zapoteco).
    * HU-C3: Como Comprador, quiero tener la certeza de que la informaci√≥n es aut√©ntica y proviene directamente del productor.
* **√âpica 4: Conexi√≥n y Comercio Directo**
    * HU-C4: Como Comprador, despu√©s de ver la informaci√≥n del lote, quiero poder contactar f√°cilmente al Maestro Mezcalero (preferentemente v√≠a WhatsApp) para preguntar o iniciar la compra.
    * HU-M3: Como Maestro Mezcalero, quiero recibir notificaciones o mensajes directos (v√≠a WhatsApp) de compradores interesados.

Esta agrupaci√≥n define los bloques funcionales principales de la plataforma.

---

## **2. Identificaci√≥n y Selecci√≥n de Abstracciones Clave**

Siguiendo un proceso similar al descrito en la plantilla (basado en responsabilidades, informaci√≥n retenida, servicios necesarios, etc.), identificamos las siguientes abstracciones (clases) esenciales para "Ra√≠ces Conectadas":

* **`MaestroMezcalero`**: Representa al productor de mezcal de la comunidad. Almacena su perfil, historia, datos de contacto y gestiona sus lotes. (Derivada de HU-M1, HU-L1, HU-C2, HU-C4).
* **`LoteMezcal`**: Representa un lote espec√≠fico de producci√≥n de mezcal. Contiene detalles del producto, el enlace al QR/ID √∫nico y se asocia a su Maestro. (Derivada de HU-L1, HU-L2, HU-C2).
* **`ContenidoMultimedia`**: Representa los elementos visuales o auditivos asociados (fotos del lote/proceso, enlace a video de YouTube, enlace a audio Zapoteco). (Derivada de HU-L1, HU-C2).
* **`VisorWebLote`**: No es una clase de *datos*, sino que representa la l√≥gica o componente responsable de *presentar* la informaci√≥n de un LoteMezcal y su Maestro al Comprador tras escanear el QR. (Derivada de HU-C2, HU-C4).
* **`GestorQR`**: Representa la funcionalidad para generar y asociar identificadores √∫nicos (que ir√°n en el QR) a cada `LoteMezcal`. (Derivada de HU-L2).

Se descartaron abstracciones m√°s complejas (como `Blockchain/NFT`, `PasarelaPago`, `Logistica`) para el **MVP del Hackatec**, enfoc√°ndose en el flujo central de autenticaci√≥n, visualizaci√≥n y contacto directo v√≠a WhatsApp.

---

## **3. Dise√±o de Fichas CRC (Clase-Responsabilidad-Colaborador)**

#### Clase: MaestroMezcalero

| **Clase: MaestroMezcalero**       |                                                         |
| :-------------------------------- | :------------------------------------------------------ |
| **Responsabilidades**             | **Colaboradores**                                       |
| Gestionar datos del perfil        | -                                                       |
| Gestionar informaci√≥n de contacto | -                                                       |
| A√±adir/Gestionar Lotes de Mezcal  | `LoteMezcal`                                            |
| Asociar contenido multimedia      | `ContenidoMultimedia` (ej. foto perfil, audio Zapoteco) |
| *Ser validado*                    | `Administrador` (Actor Externo/Rol)                     |

* **Descripci√≥n**: Modela al productor individual de mezcal dentro de la comunidad. Contiene su historia, datos y es el punto de contacto.
* **Atributos Clave**: `idMaestro`, `nombre`, `historiaPalenque`, `contactoWhatsApp`, `contactoEmail`, `fotoPerfilURL`, `audioZapotecoURL`, `esValidado`.

#### Clase: LoteMezcal

| **Clase: LoteMezcal**                |                       |
| :----------------------------------- | :-------------------- |
| **Responsabilidades**                | **Colaboradores**     |
| Almacenar datos espec√≠ficos del lote | -                     |
| Asociarse a un MaestroMezcalero      | `MaestroMezcalero`    |
| Asociar contenido multimedia         | `ContenidoMultimedia` |
| Gestionar identificador √∫nico (QR)   | `GestorQR`            |
|                                      |                       |

* **Descripci√≥n**: Representa una producci√≥n espec√≠fica (batch) de mezcal con sus caracter√≠sticas √∫nicas. Es el objeto principal de la trazabilidad.
* **Atributos Clave**: `idLote` (ID √∫nico ligado al QR), `idMaestro` (FK), `tipoAgave`, `fechaProduccion`, `notasCata`, `volumen`, `gradoAlcoholico`, `estado` (Disponible/Agotado).

#### Clase: ContenidoMultimedia

| **Clase: ContenidoMultimedia**    |                                  |
| :-------------------------------- | :------------------------------- |
| **Responsabilidades**             | **Colaboradores**                |
| Almacenar URL/referencia al medio | -                                |
| Indicar tipo de medio             | -                                |
| Asociarse a Lote o Maestro        | `LoteMezcal`, `MaestroMezcalero` |

* **Descripci√≥n**: Abstracci√≥n para manejar diferentes tipos de medios asociados (fotos, videos, audios). Simplifica la gesti√≥n.
* **Atributos Clave**: `idMedia`, `idAsociado` (Lote o Maestro), `tipoMedio` (YOUTUBE\_URL, IMAGE\_URL, AUDIO\_URL), `urlMedia`.

#### Clase: GestorQR

| **Clase: GestorQR**                 |                      |
| :---------------------------------- | :------------------- |
| **Responsabilidades**               | **Colaboradores**    |
| Generar identificador √∫nico de Lote | -                    |
| Crear URL de la plataforma para QR  | `LoteMezcal`         |
| *(Opcional)* Generar imagen QR      | *(Librer√≠a externa)* |

* **Descripci√≥n**: Encapsula la l√≥gica para crear los identificadores √∫nicos que van dentro del QR y las URLs correspondientes que apuntan al `VisorWebLote`.
* **Atributos Clave**: N/A (Principalmente m√©todos).

*(Nota: `VisorWebLote` y `ContactoDirecto` son m√°s bien funcionalidades o componentes de la interfaz/l√≥gica de presentaci√≥n, no clases de entidad primarias en este modelo simplificado).*

---

## **4. Dise√±o Detallado de Clases (Atributos y M√©todos Principales)**

#### Clase: `MaestroMezcalero`

* **Atributos**:
    * `-idMaestro: string` (PK, puede ser UUID o ID simple)
    * `-nombreCompleto: string`
    * `-historiaPalenque: string`
    * `-fotoPerfilURL: string`
    * `-audioZapotecoURL: string` (Enlace al archivo de audio)
    * `-contactoWhatsApp: string` (N√∫mero de tel√©fono)
    * `-contactoEmail: string` (Opcional)
    * `-esValidado: boolean`
* **M√©todos**:
    * `+actualizarPerfil(datos: dict): void`
    * `+obtenerPerfil(): dict`
    * `+definirContactoPrincipal(tipo: string, valor: string): void`
    * `+listarLotesPropios(): List<LoteMezcal>`

#### Clase: `LoteMezcal`

* **Atributos**:
    * `-idLote: string` (PK, ID √∫nico generado por `GestorQR`)
    * `-idMaestro: string` (FK a `MaestroMezcalero`)
    * `-tipoAgave: string`
    * `-fechaProduccion: string` (o Date)
    * `-notasCataMaestro: string`
    * `-descripcionProceso: string`
    * `-volumenLote: float` (Opcional)
    * `-gradoAlcoholico: float` (Opcional)
    * `-estado: string` ("Disponible", "Agotado")
    * `-urlQRPlataforma: string` (URL que se pone en el QR, ej: `plataforma.com/lote/idLote`)
* **M√©todos**:
    * `+guardar(offline: boolean): boolean` *(Indica si debe intentar guardar local o sincronizar)*
    * `+obtenerDatosCompletos(): dict` (Incluye datos del maestro y multimedia asociados)
    * `+asociarMedia(media: ContenidoMultimedia): void`
    * `+definirURLQR(url: string): void`
    * `+actualizarEstado(nuevoEstado: string): void`

#### Clase: `ContenidoMultimedia`

* **Atributos**:
    * `-idMedia: string` (PK)
    * `-idEntidadAsociada: string` (Puede ser `idLote` o `idMaestro`)
    * `-tipoEntidad: string` ("LoteMezcal", "MaestroMezcalero")
    * `-tipoMedio: string` ("YOUTUBE_URL", "IMAGE_URL", "AUDIO_URL")
    * `-urlMedia: string` (Enlace al recurso)
    * `-descripcionAlt: string` (Opcional)
* **M√©todos**:
    * `+obtenerUrl(): string`
    * `+validarUrl(): boolean`

#### Clase: `GestorQR`

* **M√©todos**:
    * `+generarIdUnicoLote(): string`
    * `+construirUrlPlataforma(idLote: string): string`
    * `+(Opcional) generarImagenQR(url: string): bytes`

---

## **5. Diagrama de Clases UML Simplificado (Mermaid)**

```mermaid
classDiagram
    class MaestroMezcalero {
        -idMaestro: string
        -nombreCompleto: string
        -historiaPalenque: string
        -fotoPerfilURL: string
        -audioZapotecoURL: string
        -contactoWhatsApp: string
        -esValidado: boolean
        +actualizarPerfil(datos: dict): void
        +obtenerPerfil(): dict
        +listarLotesPropios(): List~LoteMezcal~
    }
    class LoteMezcal {
        -idLote: string
        -idMaestro: string
        -tipoAgave: string
        -fechaProduccion: string
        -notasCataMaestro: string
        -descripcionProceso: string
        -estado: string
        -urlQRPlataforma: string
        +guardar(offline: boolean): boolean
        +obtenerDatosCompletos(): dict
        +asociarMedia(media: ContenidoMultimedia): void
        +actualizarEstado(nuevoEstado: string): void
    }
    class ContenidoMultimedia {
        -idMedia: string
        -idEntidadAsociada: string
        -tipoEntidad: string
        -tipoMedio: string
        -urlMedia: string
        +obtenerUrl(): string
    }
    class GestorQR {
        +generarIdUnicoLote(): string
        +construirUrlPlataforma(idLote: string): string
    }
    class VisorWebLote {
        %% Representa la l√≥gica de presentaci√≥n %%
        +mostrarPaginaLote(idLote: string): HTMLResponse
        +generarEnlaceWhatsApp(maestro: MaestroMezcalero): string
    }

    MaestroMezcalero "1" -- "*" LoteMezcal : produce/gestiona
    LoteMezcal "1" -- "1" MaestroMezcalero : perteneceA
    LoteMezcal "1" -- "*" ContenidoMultimedia : tiene
    MaestroMezcalero "1" -- "*" ContenidoMultimedia : tienePerfilMedia
    GestorQR ..> LoteMezcal : generaID/URLPara
    VisorWebLote ..> LoteMezcal : muestraDatosDe
    VisorWebLote ..> MaestroMezcalero : muestraDatosDe
    VisorWebLote ..> ContenidoMultimedia : muestra
```










